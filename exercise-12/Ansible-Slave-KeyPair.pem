ubuntu@ip-172-31-34-26:~/vprofile-practice/cp -r exercise-11 exercise-12


ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ ssh -i Ansible-Slave-KeyPair.pem  ec2-user@172.31.37.52
# This sever is managed by ansible. No manual changes
Last login: Fri Aug 16 06:20:40 2024 from 172.31.34.26
[ec2-user@ip-172-31-37-52 ~]$ sudo -i
[root@ip-172-31-37-52 ~]# cat /etc/chrony.conf

<<<<<<<<<<<<<<COPY that file >>>>>>>>>>>>>
[root@ip-172-31-37-52 ~]# exit
logout
[ec2-user@ip-172-31-37-52 ~]$ exit
logout
Connection to 172.31.37.52 closed.
ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ mkdir templates
ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ vim templates/ntpconf_centos   paste the copied text here

pool 2.centos.pool.ntp.org iburst  we are going change this 

ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ ssh -i Ansible-Slave-KeyPair.pem ubuntu@172.31.21.35

ubuntu@ip-172-31-21-35:~$ sudo -i
root@ip-172-31-21-35:~# cat /etc/ntp.conf

root@ip-172-31-21-35:~# exit
logout
ubuntu@ip-172-31-21-35:~$ exit

ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ vim templates/ntpconf_ubuntu


ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ ssh -i Ansible-Slave-KeyPair.pem ec2-user@172.31.31.86
[ec2-user@ip-172-31-31-86 ~]$ sudo -i
[root@ip-172-31-31-86 ~]# cat /etc/ntp.conf

[root@ip-172-31-31-86 ~]# exit
logout
[ec2-user@ip-172-31-31-86 ~]$ exit
logout
Connection to 172.31.31.86 closed.
ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ vim templates/ntpconf_amazon

ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ ansible-playbook provisioning.yaml


ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ vim group_vars/all
USRNM: commonuser
COMM: variable from groupvars_all file
ntp0: 0.north-america.pool.ntp.org
ntp1: 1.north-america.pool.ntp.org
ntp2: 2.north-america.pool.ntp.org
ntp3: 3.north-america.pool.ntp.org

ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ vim templates/ntpconf_centos
pool "{{ntp0}}" iburst
pool "{{ntp1}}" iburst
pool "{{ntp2}}" iburst
pool "{{ntp3}}" iburst

ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ vim templates/ntpconf_ubuntu
pool "{{ntp0}}" iburst
pool "{{ntp1}}" iburst
pool "{{ntp2}}" iburst
pool "{{ntp3}}" iburst

ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ vim templates/ntpconf_amazon
pool "{{ntp0}}" iburst
pool "{{ntp1}}" iburst
pool "{{ntp2}}" iburst
pool "{{ntp3}}" iburst

ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ ansible-playbook provisioning.yaml

ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ vim provisioning.yaml

    - name: Create a Folder
      ansible.builtin.file:
        path: /opt/test24
        state: directory

ubuntu@ip-172-31-34-26:~/vprofile-practice/exercise-12$ ansible-playbook provisioning.yaml